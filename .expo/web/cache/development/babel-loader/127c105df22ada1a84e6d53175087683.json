{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useContext, useEffect, useState } from \"react\";\nimport ExpensesOutput from \"../components/ExpensesOutput/ExpensesOutput\";\nimport ErrorOverlay from \"../components/UI/ErrorOverlay\";\nimport LoadingOverlay from \"../components/UI/LoadingOverlay\";\nimport { ExpensesContext } from \"../store/expenses-context\";\nimport { getDateMinusDays } from \"../util/date\";\nimport { fetchExpenses } from \"../util/http\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar RecentExpenses = function RecentExpenses() {\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isFetching = _useState2[0],\n      setIsFetching = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var expensesCtx = useContext(ExpensesContext);\n  useEffect(function () {\n    function getExpenses() {\n      var expenses;\n      return _regeneratorRuntime.async(function getExpenses$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsFetching(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(fetchExpenses());\n\n            case 4:\n              expenses = _context.sent;\n              expensesCtx.setExpenses(expenses);\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n              setError(\"Could not fetch expenses!\");\n\n            case 11:\n              setIsFetching(false);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[1, 8]], Promise);\n    }\n\n    getExpenses();\n  }, []);\n\n  function errorHandler() {\n    setError(null);\n  }\n\n  if (error && !isFetching) {\n    return _jsx(ErrorOverlay, {\n      message: error,\n      onConfirm: errorHandler\n    });\n  }\n\n  if (isFetching) {\n    return _jsx(LoadingOverlay, {});\n  }\n\n  var recentExpenses = expensesCtx.expenses.filter(function (expense) {\n    var today = new Date();\n    var days7DaysAgo = getDateMinusDays(today, 7);\n    return expense.date >= days7DaysAgo && expense.date <= today;\n  });\n  return _jsx(ExpensesOutput, {\n    expenses: recentExpenses,\n    expensesPeriod: \"Last 7 Days\",\n    fallbackText: \"No expenses registered for the last 7 days.\"\n  });\n};\n\nexport default RecentExpenses;","map":{"version":3,"names":["useContext","useEffect","useState","ExpensesOutput","ErrorOverlay","LoadingOverlay","ExpensesContext","getDateMinusDays","fetchExpenses","RecentExpenses","isFetching","setIsFetching","error","setError","expensesCtx","getExpenses","expenses","setExpenses","errorHandler","recentExpenses","filter","expense","today","Date","days7DaysAgo","date"],"sources":["/home/harrytimbog/code/Harrytimbog/react-native/expense-tracker-mobile-app/screens/RecentExpenses.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport ExpensesOutput from \"../components/ExpensesOutput/ExpensesOutput\";\nimport ErrorOverlay from \"../components/UI/ErrorOverlay\";\nimport LoadingOverlay from \"../components/UI/LoadingOverlay\";\nimport { ExpensesContext } from \"../store/expenses-context\";\nimport { getDateMinusDays } from \"../util/date\";\nimport { fetchExpenses } from \"../util/http\";\n\nconst RecentExpenses = () => {\n  const [isFetching, setIsFetching] = useState(true);\n  const [error, setError] = useState();\n  const expensesCtx = useContext(ExpensesContext);\n\n  useEffect(() => {\n    async function getExpenses() {\n      setIsFetching(true);\n      try {\n        const expenses = await fetchExpenses();\n        expensesCtx.setExpenses(expenses);\n      } catch (error) {\n        setError(\"Could not fetch expenses!\");\n      }\n      setIsFetching(false);\n    }\n\n    getExpenses();\n  }, []);\n\n  function errorHandler() {\n    setError(null);\n  }\n\n  if (error && !isFetching) {\n    return <ErrorOverlay message={error} onConfirm={errorHandler} />;\n  }\n\n  if (isFetching) {\n    return <LoadingOverlay />;\n  }\n\n  const recentExpenses = expensesCtx.expenses.filter((expense) => {\n    const today = new Date();\n    const days7DaysAgo = getDateMinusDays(today, 7);\n\n    return expense.date >= days7DaysAgo && expense.date <= today;\n  });\n\n  return (\n    <ExpensesOutput\n      expenses={recentExpenses}\n      expensesPeriod=\"Last 7 Days\"\n      fallbackText=\"No expenses registered for the last 7 days.\"\n    />\n  );\n};\n\nexport default RecentExpenses;\n"],"mappings":";;AAAA,SAASA,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,OAAOC,cAAP;AACA,OAAOC,YAAP;AACA,OAAOC,cAAP;AACA,SAASC,eAAT;AACA,SAASC,gBAAT;AACA,SAASC,aAAT;;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;EAC3B,gBAAoCP,QAAQ,CAAC,IAAD,CAA5C;EAAA;EAAA,IAAOQ,UAAP;EAAA,IAAmBC,aAAnB;;EACA,iBAA0BT,QAAQ,EAAlC;EAAA;EAAA,IAAOU,KAAP;EAAA,IAAcC,QAAd;;EACA,IAAMC,WAAW,GAAGd,UAAU,CAACM,eAAD,CAA9B;EAEAL,SAAS,CAAC,YAAM;IACd,SAAec,WAAf;MAAA;MAAA;QAAA;UAAA;YAAA;cACEJ,aAAa,CAAC,IAAD,CAAb;cADF;cAAA;cAAA,iCAG2BH,aAAa,EAHxC;;YAAA;cAGUQ,QAHV;cAIIF,WAAW,CAACG,WAAZ,CAAwBD,QAAxB;cAJJ;cAAA;;YAAA;cAAA;cAAA;cAMIH,QAAQ,CAAC,2BAAD,CAAR;;YANJ;cAQEF,aAAa,CAAC,KAAD,CAAb;;YARF;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;;IAWAI,WAAW;EACZ,CAbQ,EAaN,EAbM,CAAT;;EAeA,SAASG,YAAT,GAAwB;IACtBL,QAAQ,CAAC,IAAD,CAAR;EACD;;EAED,IAAID,KAAK,IAAI,CAACF,UAAd,EAA0B;IACxB,OAAO,KAAC,YAAD;MAAc,OAAO,EAAEE,KAAvB;MAA8B,SAAS,EAAEM;IAAzC,EAAP;EACD;;EAED,IAAIR,UAAJ,EAAgB;IACd,OAAO,KAAC,cAAD,KAAP;EACD;;EAED,IAAMS,cAAc,GAAGL,WAAW,CAACE,QAAZ,CAAqBI,MAArB,CAA4B,UAACC,OAAD,EAAa;IAC9D,IAAMC,KAAK,GAAG,IAAIC,IAAJ,EAAd;IACA,IAAMC,YAAY,GAAGjB,gBAAgB,CAACe,KAAD,EAAQ,CAAR,CAArC;IAEA,OAAOD,OAAO,CAACI,IAAR,IAAgBD,YAAhB,IAAgCH,OAAO,CAACI,IAAR,IAAgBH,KAAvD;EACD,CALsB,CAAvB;EAOA,OACE,KAAC,cAAD;IACE,QAAQ,EAAEH,cADZ;IAEE,cAAc,EAAC,aAFjB;IAGE,YAAY,EAAC;EAHf,EADF;AAOD,CA9CD;;AAgDA,eAAeV,cAAf"},"metadata":{},"sourceType":"module"}