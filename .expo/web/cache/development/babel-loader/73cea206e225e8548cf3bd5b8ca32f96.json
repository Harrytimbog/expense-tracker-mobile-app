{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { useContext, useLayoutEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ExpenseForm from \"../components/ManageExpense/ExpenseForm\";\nimport IconButton from \"../components/UI/IconButton\";\nimport { GlobalStyles } from \"../constants/styles\";\nimport { ExpensesContext } from \"../store/expenses-context\";\nimport { deleteExpense, storeExpense, updateExpense } from \"../util/http\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar ManageExpense = function ManageExpense(_ref) {\n  var _route$params;\n\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var expensesCtx = useContext(ExpensesContext);\n  var editedExpenseId = (_route$params = route.params) == null ? void 0 : _route$params.expenseId;\n  var isEditing = !!editedExpenseId;\n  var selectedExpense = expensesCtx.expenses.find(function (expense) {\n    return expense.id === editedExpenseId;\n  });\n  useLayoutEffect(function () {\n    navigation.setOptions({\n      title: isEditing ? \"Edit Expense\" : \"Add Expense\"\n    });\n  }, [navigation, isEditing]);\n\n  function deleteExpenseHandler() {\n    deleteExpense(editedExpenseId);\n    expensesCtx.deleteExpense(editedExpenseId);\n    navigation.goBack();\n  }\n\n  function CancelHandler() {\n    navigation.goBack();\n  }\n\n  function confirmHandler(expenseData) {\n    var id;\n    return _regeneratorRuntime.async(function confirmHandler$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!isEditing) {\n              _context.next = 6;\n              break;\n            }\n\n            expensesCtx.updateExpense(editedExpenseId, expenseData);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(updateExpense(editedExpenseId, expenseData));\n\n          case 4:\n            _context.next = 10;\n            break;\n\n          case 6:\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(storeExpense(expenseData));\n\n          case 8:\n            id = _context.sent;\n            expensesCtx.addExpense(_objectSpread(_objectSpread({}, expenseData), {}, {\n              id: id\n            }));\n\n          case 10:\n            navigation.goBack();\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(ExpenseForm, {\n      submitButtonLabel: isEditing ? \"Update\" : \"Add\",\n      onCancel: CancelHandler,\n      onSubmit: confirmHandler,\n      defaultValues: selectedExpense\n    }), isEditing && _jsx(View, {\n      style: styles.deleteContainer,\n      children: _jsx(IconButton, {\n        icon: \"trash\",\n        color: GlobalStyles.colors.error500,\n        size: 36,\n        onPress: deleteExpenseHandler\n      })\n    })]\n  });\n};\n\nexport default ManageExpense;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 24,\n    backgroundColor: GlobalStyles.colors.primary800\n  },\n  deleteContainer: {\n    marginTop: 16,\n    paddingTop: 8,\n    borderTopWidth: 2,\n    borderTopColor: GlobalStyles.colors.primary200,\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"names":["useContext","useLayoutEffect","ExpenseForm","IconButton","GlobalStyles","ExpensesContext","deleteExpense","storeExpense","updateExpense","ManageExpense","route","navigation","expensesCtx","editedExpenseId","params","expenseId","isEditing","selectedExpense","expenses","find","expense","id","setOptions","title","deleteExpenseHandler","goBack","CancelHandler","confirmHandler","expenseData","addExpense","styles","container","deleteContainer","colors","error500","StyleSheet","create","flex","padding","backgroundColor","primary800","marginTop","paddingTop","borderTopWidth","borderTopColor","primary200","alignItems"],"sources":["/home/harrytimbog/code/Harrytimbog/react-native/expense-tracker-mobile-app/screens/ManageExpense.js"],"sourcesContent":["import { useContext, useLayoutEffect } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport ExpenseForm from \"../components/ManageExpense/ExpenseForm\";\nimport IconButton from \"../components/UI/IconButton\";\nimport { GlobalStyles } from \"../constants/styles\";\nimport { ExpensesContext } from \"../store/expenses-context\";\nimport { deleteExpense, storeExpense, updateExpense } from \"../util/http\";\n\nconst ManageExpense = ({ route, navigation }) => {\n  const expensesCtx = useContext(ExpensesContext);\n  const editedExpenseId = route.params?.expenseId;\n\n  const isEditing = !!editedExpenseId; // Javascrpt trick to convert a value to a boolean (falsy value to false, truthy value to true)\n\n  const selectedExpense = expensesCtx.expenses.find(\n    (expense) => expense.id === editedExpenseId\n  );\n\n  useLayoutEffect(() => {\n    navigation.setOptions({\n      title: isEditing ? \"Edit Expense\" : \"Add Expense\",\n    });\n  }, [navigation, isEditing]);\n\n  function deleteExpenseHandler() {\n    deleteExpense(editedExpenseId);\n    expensesCtx.deleteExpense(editedExpenseId);\n    navigation.goBack();\n  }\n\n  function CancelHandler() {\n    navigation.goBack();\n  }\n\n  async function confirmHandler(expenseData) {\n    if (isEditing) {\n      expensesCtx.updateExpense(editedExpenseId, expenseData);\n      await updateExpense(editedExpenseId, expenseData);\n    } else {\n      const id = await storeExpense(expenseData);\n      expensesCtx.addExpense({ ...expenseData, id: id });\n    }\n    navigation.goBack();\n  }\n\n  return (\n    <View style={styles.container}>\n      <ExpenseForm\n        submitButtonLabel={isEditing ? \"Update\" : \"Add\"}\n        onCancel={CancelHandler}\n        onSubmit={confirmHandler}\n        defaultValues={selectedExpense}\n      />\n      {isEditing && (\n        <View style={styles.deleteContainer}>\n          <IconButton\n            icon=\"trash\"\n            color={GlobalStyles.colors.error500}\n            size={36}\n            onPress={deleteExpenseHandler}\n          />\n        </View>\n      )}\n    </View>\n  );\n};\n\nexport default ManageExpense;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 24,\n    backgroundColor: GlobalStyles.colors.primary800,\n  },\n  deleteContainer: {\n    marginTop: 16,\n    paddingTop: 8,\n    borderTopWidth: 2,\n    borderTopColor: GlobalStyles.colors.primary200,\n    alignItems: \"center\",\n  },\n});\n"],"mappings":";;;;;;;AAAA,SAASA,UAAT,EAAqBC,eAArB,QAA4C,OAA5C;;;AAEA,OAAOC,WAAP;AACA,OAAOC,UAAP;AACA,SAASC,YAAT;AACA,SAASC,eAAT;AACA,SAASC,aAAT,EAAwBC,YAAxB,EAAsCC,aAAtC;;;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,OAA2B;EAAA;;EAAA,IAAxBC,KAAwB,QAAxBA,KAAwB;EAAA,IAAjBC,UAAiB,QAAjBA,UAAiB;EAC/C,IAAMC,WAAW,GAAGZ,UAAU,CAACK,eAAD,CAA9B;EACA,IAAMQ,eAAe,oBAAGH,KAAK,CAACI,MAAT,qBAAG,cAAcC,SAAtC;EAEA,IAAMC,SAAS,GAAG,CAAC,CAACH,eAApB;EAEA,IAAMI,eAAe,GAAGL,WAAW,CAACM,QAAZ,CAAqBC,IAArB,CACtB,UAACC,OAAD;IAAA,OAAaA,OAAO,CAACC,EAAR,KAAeR,eAA5B;EAAA,CADsB,CAAxB;EAIAZ,eAAe,CAAC,YAAM;IACpBU,UAAU,CAACW,UAAX,CAAsB;MACpBC,KAAK,EAAEP,SAAS,GAAG,cAAH,GAAoB;IADhB,CAAtB;EAGD,CAJc,EAIZ,CAACL,UAAD,EAAaK,SAAb,CAJY,CAAf;;EAMA,SAASQ,oBAAT,GAAgC;IAC9BlB,aAAa,CAACO,eAAD,CAAb;IACAD,WAAW,CAACN,aAAZ,CAA0BO,eAA1B;IACAF,UAAU,CAACc,MAAX;EACD;;EAED,SAASC,aAAT,GAAyB;IACvBf,UAAU,CAACc,MAAX;EACD;;EAED,SAAeE,cAAf,CAA8BC,WAA9B;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA,KACMZ,SADN;cAAA;cAAA;YAAA;;YAEIJ,WAAW,CAACJ,aAAZ,CAA0BK,eAA1B,EAA2Ce,WAA3C;YAFJ;YAAA,iCAGUpB,aAAa,CAACK,eAAD,EAAkBe,WAAlB,CAHvB;;UAAA;YAAA;YAAA;;UAAA;YAAA;YAAA,iCAKqBrB,YAAY,CAACqB,WAAD,CALjC;;UAAA;YAKUP,EALV;YAMIT,WAAW,CAACiB,UAAZ,iCAA4BD,WAA5B;cAAyCP,EAAE,EAAEA;YAA7C;;UANJ;YAQEV,UAAU,CAACc,MAAX;;UARF;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA;;EAWA,OACE,MAAC,IAAD;IAAM,KAAK,EAAEK,MAAM,CAACC,SAApB;IAAA,WACE,KAAC,WAAD;MACE,iBAAiB,EAAEf,SAAS,GAAG,QAAH,GAAc,KAD5C;MAEE,QAAQ,EAAEU,aAFZ;MAGE,QAAQ,EAAEC,cAHZ;MAIE,aAAa,EAAEV;IAJjB,EADF,EAOGD,SAAS,IACR,KAAC,IAAD;MAAM,KAAK,EAAEc,MAAM,CAACE,eAApB;MAAA,UACE,KAAC,UAAD;QACE,IAAI,EAAC,OADP;QAEE,KAAK,EAAE5B,YAAY,CAAC6B,MAAb,CAAoBC,QAF7B;QAGE,IAAI,EAAE,EAHR;QAIE,OAAO,EAAEV;MAJX;IADF,EARJ;EAAA,EADF;AAoBD,CAzDD;;AA2DA,eAAef,aAAf;AAEA,IAAMqB,MAAM,GAAGK,UAAU,CAACC,MAAX,CAAkB;EAC/BL,SAAS,EAAE;IACTM,IAAI,EAAE,CADG;IAETC,OAAO,EAAE,EAFA;IAGTC,eAAe,EAAEnC,YAAY,CAAC6B,MAAb,CAAoBO;EAH5B,CADoB;EAM/BR,eAAe,EAAE;IACfS,SAAS,EAAE,EADI;IAEfC,UAAU,EAAE,CAFG;IAGfC,cAAc,EAAE,CAHD;IAIfC,cAAc,EAAExC,YAAY,CAAC6B,MAAb,CAAoBY,UAJrB;IAKfC,UAAU,EAAE;EALG;AANc,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}